# Port scanning

Once attacker knows the IP address of the live hosts, next step is to find out what applications hosts are running. By knowing running applications and its vulnerabilities, it is easier for an attacker to take further decisions. On server, Applications are associated to port numbers. For example, HTTP uses port number 80. If port number 80 is open, that means computer could be the web server. There are port number range between 0 to 1023 and each number indicates certain application. Attacker sends a port scanning probes to each identified host in order to determine which applications are running on that host. In the background, port identification process sends an connection to a program on a particular port number. If program responds with the agreement, then it means that particular port is open on the host.

Public IP addresses are controlled by worldwide registrars. however port numbers are not controlled by anyone. Port numbers are 16 bits unsigned integer and unique for each compouter.

* Well known ports (0 - 1023)
* Registered ports (1024 - 49151)
* Dynamic/private ports (49512 - 65535)

### Example of well known port numbers:
* echo – 7 - TCP
* ftp-data – 20 - UDP
* ftp – 21 - TCP
* ssh – 22 - TCP
* telnet – 23 - TCP
* domain – 53 - UDP
* www-http – 80 - TCP

# Nmap - A Stealth Port Scanner

Ever thought how attackers can find out which ports are open on a computer/host? or how to find out which services are running on a computer without asking to network admin? Well. It is possible by using this handy tool called Nmap (Network Mapper). 

Nmap is the ideal tool for performing a simple network inventory or vulnerability assessment. By default, Nmap performs a SYN scan and can be quickly scan thousands of open, closed and filtered ports.

## Nmap examples

* **nmap -sP 10.0.0.0/24** : Ping scans the network, listing machines that respond to ping.

* **nmap -p 1-65535 -sV -sS -T4 target** : Full TCP port scan using with service version detection.

* **nmap -v -sS -A -T4 target** : Prints verbose output, runs stealth syn scan, T4 timing, OS and version detection + traceroute and scripts against target services.

* **nmap -v -sS -A -T5 target** : Prints verbose output, runs stealth syn scan, T5 timing, OS and version detection + traceroute and scripts against target services.

* **nmap -v -sV -O -sS -T5 target** : Prints verbose output, runs stealth syn scan, T5 timing, OS and version detection.

* **nmap -v -p 1-65535 -sV -O -sS -T4 target** : Prints verbose output, runs stealth syn scan, T4 timing, OS and version detection + full port range scan.

* **nmap -v -p 1-65535 -sV -O -sS -T5 target** : Prints verbose output, runs stealth syn scan, T5 timing, OS and version detection + full port range scan.


### Your task
Investigate association of port scanning with TCP/IP protocol stack. Which layer in TCP/IP protocol stack is connected to ports? Use Kali Linux as operating system, and play with the preinstalled tool Nmap: https://github.com/nmap/nmap. Try **man nmap** command and see what it display.
