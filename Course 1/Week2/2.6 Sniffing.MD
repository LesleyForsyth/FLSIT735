# Network Sniffing

Let's start this step by recapping the main points that we've explored so far this week.

Computer networks are made up of several layers.  

While it's important to know about these other layers, communications between clients and servers happen on the network layer - so you should't be surprised that we'll focus on this layer during a course on communications network security.  

Most interactions between a client and a server occur using IP/TCP.  The IP identifies _where_ to send packets of data to and from, using IP addresses.  The TCP handles the transfer of this data by ensuring a reliable connection between the client and the server.

### Compromising networks

This system is good, but it's not perfect.  

Ulimately, 


Ultimately, every hacker wishes to compromise a target system and gain access to the system. The goal is same for any hacker, regardless of the hacker's type (Either Blue, White or Grey). Before a hacker can compromise the system, he must know a great deal of information about the target system. There are two main reasons you should know about the available tools which can find the system's vulnerabilities. First, we should have the information about recently available tools in the market which hackers can potentially use. Secondly, we can use available tools to audit our own system's vulnerabilities. That way if we know our system's vulnerabilities then we have chances to fix them before someone exploits them.

Current computer networks are vulnerable to sniffer
tools. In this activity, we will see the fundamental
flaws of current networks that make sniffing an
easy task (Ethernet).??

### How Ethernet functions(at Data Link layer) - CSMA/CD

Before we discuss the packet sniffing tools, we need to understand the function of data link layer(Ethernet). If there are many devices attached to the same network segment. Just imagine, if all devices try to send a message at the same time on the shared segment.

![GitHub Logo](./images/CSMA-CD.gif)
<!--- (source: http://pharoah-net.blogspot.com.au/2011/12/logical-topology.html -->

Let's take another example to understand it more clearly. There are 30 students in a classroom. The teacher asks a question to students. If all 30 students start speaking at the same time. Would it be possible for a teacher to listen to an answer clearly? Obviously, no. Why? Because of a collision between every student's voice signals which are travelling in the same classroom. What would be the solution? Before speaking, every student check/sense, Is there any other student speaking at the moment? If yes, the student will wait for a while and try again after the wait. If no, the student will start speaking instantly. Exactly the same way, CSMA/CD works.

Why we discussed CSMA/CD? because we need to know how multiple devices use the same physical cable while listening and sending the data.

Let's imagine if I want to sense each and every packet travelling in the network segment, what would I do? Well, I should go to the data link layer and install the Wireshark or any other packet sniffer tools. All the packet sniffer tools sit at data link layer. What do you think?

### What is Network Analysis and Sniffing?

A process of capturing network traffic and inspecting it closely to determine what is happening on the network is called Network Analysis. 

![GitHub Logo](./images/packet-sniffing.jpg)
<!--- (source: https://i0.wp.com/latesthackingnews.com/wp-content/uploads/2017/08/Packet-sniffing.jpg?resize=728%2C445&ssl=1
 -->

A network analyzer tool decodes the data packets of common protocols and displays the network traffic in a human-readable format. We can call network analysis as either sniffing or packet analysis or protocol analysis or eavesdropping or traffic analysis. Sniffing is the more popular name by the way.

### How can we differentiate different network analyzers?

The network analyzer can be the combination of either hardware and software or just a software. The major difference between various network analyzer is the no. of protocols they understand and decode. In addition, the quality of decoding, the user interface and graphing statistical capabilities may vary between different network analyzers.

### How Man-in-the-Middle can use Sniffers?
* Compromising proprietary information
* Capturing clear-text usernames and passwords
* Capturing and replaying Voice over IP telephone conversations
* Mapping a network
* Passive OS fingerprinting

### How Man-in-the-Middle start the sniffing process?
The first attacker gains an access to the communication cable of the targeted system by tapping into the cable somewhere between the path of the communications. There are ways to achieve this as below:
* Physically sense the data from the cable.
* Breaking into a target computer, install sniffing software and control it remotely.
* Breaking into an Internet Service Provider(ISP), install sniffing software and control it remotely.
* Find out the existing system at ISP which has already sniffing software installed.
* Using social engineering to gain physical access at an ISP to install a packet sniffer.
* Having an insider partner in crime at the target organization or ISP who can install a sniffing software.
* Diverting communication to a path that includes the intruder's computer.

## Common Network Analyzer Tools
**Wireshark (formerly known as Ethereal)** , **Cain and Abel** , **tcpdump** , **Kismet** , **Ettercap** , **NetStumbler** , **dsniff** , **Carnivore (by FBI)** , **Ntop** , **Ngrep** , **EtherApe** , **NetworkMiner** , **P0f** , **inSSIDer** , **KisMAC**

### Your task
Investigate the difference between CSMA/CA and CSMA/CD. Which one would you consider using? Compare various packet sniffers and find out which one works with GUI and which one supports CLI. Which packet sniffers are supported by Windows, macOS, Linux, BSDs and Solaris? Which one would you prefer?
