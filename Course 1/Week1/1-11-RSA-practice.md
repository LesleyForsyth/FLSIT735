# Public-key cryptography in practice

A video demonstration:

Transcript: 

* A few steps back you learned how to use cryptool, a rather intuitive tool containing all sort of cryptographic algorithms. Now we are going to take a step further and use openssl, a powerful command line tool available in most Unix and Unix-like operating systems. 
* I can assure that once you finish watching this video tutorial, you will be able to send a confidential message to any of your colleague. You will do by using popular public-key cryptosystem, known as **RSA**. 
* The history and mathematics behind RSA will be explained later, now let's put our hands into a UNIX command line interface. I'm using, for example, cygwin for Windows. 
* First thing first, let's check which version of openssl is installed. Execute: `openssl version`
* I also take this opportunity to let you know that a comprehensive documentation of all the features and options available in openssl can be obtained by executing: `man openssl`
* Recall that in asymmetric cryptography we need a pair of private and public key. We will generate a private key and save it into the file private-key-professor.pem with the following command line: `openssl genpkey -algorithm RSA -out private-key-professor.pem`. Each component of this command line can be explained as follows:
    - `genpkey` tells openssl to generate a private key.
    - `-algorithm RSA` specifies that the generated key is to be used with the RSA cryptosystem.
    - `-out private-key-professor.pem` instructs to save the generated key in the file `private-key-professor.pem`
* Check that the file has been generated by executin the command `ls`
* All right, now that we have a private key we better generate the corresponding public key. We do that in a similar way, executing `openssl pkey -in private-key-professor.pem -out public-key-professor.ppk -pubout`
    - `openssl pkey` is a command to process both public and private keys
    - `-in private-key-professor.pem -out public-key-professor.ppk`` here we specify that the key we want to process is stored in `private-key-professor.pem` and the output should go to `public-key-professor.pem`
    - finally `-pubout' says that we are after the generation of the corresponding public key of the private key given as input
* Again, we check whether the file has been generated by executing `ls`
* Now we create the message we want to send encrypted. You can do that with your favorite text editor. In this case we name the file `message.txt` and wrote in it *Cheers to my students*
* To encrypt this file we execute: `openssl pkeyutl -encrypt -in message.txt -pubin -inkey public-key-professor.ppk  -out encrypted-message.bin`
    - `pkeyutl -encrypt` we are telling openssl to use the command pkeyutl to perform encryption
    - `-in message.txt' the input of the encryption command is the file `message.txt` and 
    - '-pubin -inkey public-professor-key.ppk' here we are say that a public key is going to be used for encryption and that it can be found at `public-professor-key.ppk`
    - finally we specify where we would like to store the encrypted message by `-out encrypted-message.bin`
* And the final step is...well... decrypting the "secret" message. The process is rather analogous to the encryption process: `openssl pkeyutl -decrypt -in encrypted-message.bin -inkey private-key-professor.pem -out received-message.txt`
* You can watch the message by executing `cat received-message.txt`

## Your task

Pick a colleague and use the FutureLearn chat window to send him/her a confidential message.